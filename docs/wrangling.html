<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 3 Cleaning and wrangling data | Introduction to Data Science</title>
  <meta name="description" content="This is an open source textbook for teaching Introductory Data Science.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 3 Cleaning and wrangling data | Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an open source textbook for teaching Introductory Data Science." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Cleaning and wrangling data | Introduction to Data Science" />
  
  <meta name="twitter:description" content="This is an open source textbook for teaching Introductory Data Science." />
  

<meta name="author" content="Tiffany-Anne Timbers">
<meta name="author" content="Melissa Lee">
<meta name="author" content="Samuel Hinshaw">


<meta name="date" content="2019-01-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="reading.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to Data Science</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#jupyter-notebooks"><i class="fa fa-check"></i><b>1.2</b> Jupyter notebooks</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#loading-a-tabular-dataset"><i class="fa fa-check"></i><b>1.3</b> Loading a tabular dataset</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assigning-value-to-an-object"><i class="fa fa-check"></i><b>1.4</b> Assigning value to an object</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#subsetting-data-frames-with-select-filter"><i class="fa fa-check"></i><b>1.5</b> Subsetting data frames with <code>select</code> &amp; <code>filter</code></a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#using-select-to-subset-multiple-columns"><i class="fa fa-check"></i><b>1.5.1</b> Using <code>select</code> to subset multiple columns</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#using-select-to-subset-a-range-of-columns"><i class="fa fa-check"></i><b>1.5.2</b> Using <code>select</code> to subset a range of columns</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#using-filter-to-subset-a-single-column"><i class="fa fa-check"></i><b>1.5.3</b> Using <code>filter</code> to subset a single column</a></li>
<li class="chapter" data-level="1.5.4" data-path="index.html"><a href="index.html#using-filter-to-get-rows-with-values-above-a-threshold"><i class="fa fa-check"></i><b>1.5.4</b> Using <code>filter</code> to get rows with values above a threshold</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#combining-functions-using-the-pipe-operator"><i class="fa fa-check"></i><b>1.6</b> Combining functions using the pipe operator: %&gt;%</a><ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#using-to-combine-filter-and-select"><i class="fa fa-check"></i><b>1.6.1</b> Using %&gt;% to combine <code>filter</code> and <code>select</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#using-with-more-than-two-functions"><i class="fa fa-check"></i><b>1.6.2</b> Using %&gt;% with more than two functions</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#creating-visualizations-in-r"><i class="fa fa-check"></i><b>1.7</b> Creating Visualizations in R</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#using-ggplot-to-create-a-scatter-plot"><i class="fa fa-check"></i><b>1.7.1</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#using-ggplot-to-create-a-scatter-plot-1"><i class="fa fa-check"></i><b>1.7.2</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#formatting-ggplot-objects"><i class="fa fa-check"></i><b>1.7.3</b> Formatting ggplot objects</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#coloring-points-by-group"><i class="fa fa-check"></i><b>1.7.4</b> Coloring points by group</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#whats-next"><i class="fa fa-check"></i><b>1.7.5</b> What’s next?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>2</b> Reading in data locally and from the web</a><ul>
<li class="chapter" data-level="2.1" data-path="reading.html"><a href="reading.html#overview"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="reading.html"><a href="reading.html#chapter-learning-objectives-1"><i class="fa fa-check"></i><b>2.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="2.3" data-path="reading.html"><a href="reading.html#absolute-and-relative-file-paths"><i class="fa fa-check"></i><b>2.3</b> Absolute and relative file paths</a></li>
<li class="chapter" data-level="2.4" data-path="reading.html"><a href="reading.html#reading-tabular-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading tabular data into R</a><ul>
<li class="chapter" data-level="2.4.1" data-path="reading.html"><a href="reading.html#read_delim-as-a-more-flexible-method-to-get-tabular-data-into-r"><i class="fa fa-check"></i><b>2.4.1</b> <code>read_delim</code> as a more flexible method to get tabular data into R</a></li>
<li class="chapter" data-level="2.4.2" data-path="reading.html"><a href="reading.html#reading-tabular-data-directly-from-a-url"><i class="fa fa-check"></i><b>2.4.2</b> Reading tabular data directly from a URL</a></li>
<li class="chapter" data-level="2.4.3" data-path="reading.html"><a href="reading.html#previewing-a-data-file-before-reading-it-into-r"><i class="fa fa-check"></i><b>2.4.3</b> Previewing a data file before reading it into R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reading.html"><a href="reading.html#scraping-data-off-the-web-using-r"><i class="fa fa-check"></i><b>2.5</b> Scraping data off the web using R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="reading.html"><a href="reading.html#html-and-css-selectors"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS selectors</a></li>
<li class="chapter" data-level="2.5.2" data-path="reading.html"><a href="reading.html#are-you-allowed-to-scrape-that-website"><i class="fa fa-check"></i><b>2.5.2</b> Are you allowed to scrape that website?</a></li>
<li class="chapter" data-level="2.5.3" data-path="reading.html"><a href="reading.html#using-rvest"><i class="fa fa-check"></i><b>2.5.3</b> Using <code>rvest</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>3</b> Cleaning and wrangling data</a><ul>
<li class="chapter" data-level="3.1" data-path="wrangling.html"><a href="wrangling.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="wrangling.html"><a href="wrangling.html#chapter-learning-objectives-2"><i class="fa fa-check"></i><b>3.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="3.3" data-path="wrangling.html"><a href="wrangling.html#vectors-and-data-frames"><i class="fa fa-check"></i><b>3.3</b> Vectors and Data frames</a><ul>
<li class="chapter" data-level="3.3.1" data-path="wrangling.html"><a href="wrangling.html#what-is-a-data-frame"><i class="fa fa-check"></i><b>3.3.1</b> What is a data frame?</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangling.html"><a href="wrangling.html#what-is-a-vector"><i class="fa fa-check"></i><b>3.3.2</b> What is a vector?</a></li>
<li class="chapter" data-level="3.3.3" data-path="wrangling.html"><a href="wrangling.html#how-are-vectors-different-from-a-list"><i class="fa fa-check"></i><b>3.3.3</b> How are vectors different from a list?</a></li>
<li class="chapter" data-level="3.3.4" data-path="wrangling.html"><a href="wrangling.html#what-does-this-have-to-do-with-data-frames"><i class="fa fa-check"></i><b>3.3.4</b> What does this have to do with data frames?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangling.html"><a href="wrangling.html#the-dplyr-functions"><i class="fa fa-check"></i><b>3.4</b> The <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="3.5" data-path="wrangling.html"><a href="wrangling.html#tidy-data"><i class="fa fa-check"></i><b>3.5</b> Tidy Data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling.html"><a href="wrangling.html#what-is-tidy-data"><i class="fa fa-check"></i><b>3.5.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling.html"><a href="wrangling.html#why-is-tidy-data-important-in-r"><i class="fa fa-check"></i><b>3.5.2</b> Why is tidy data important in R?</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling.html"><a href="wrangling.html#going-from-wide-to-long-or-tidy-using-gather"><i class="fa fa-check"></i><b>3.5.3</b> Going from wide to long (or tidy!) using <code>gather</code></a></li>
<li class="chapter" data-level="3.5.4" data-path="wrangling.html"><a href="wrangling.html#using-separate-to-deal-with-multiple-delimiters"><i class="fa fa-check"></i><b>3.5.4</b> Using separate to deal with multiple delimiters</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wrangling" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Cleaning and wrangling data</h1>
<div id="overview-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Overview</h2>
<p>This chapter will be centered around tools for cleaning and wrangling data. Again, this will be in the context of a real world Data Science application and we will continue to practice working through a whole case study</p>
</div>
<div id="chapter-learning-objectives-2" class="section level2">
<h2><span class="header-section-number">3.2</span> Chapter learning objectives</h2>
<p>By the end of the chapter, students will be able to:</p>
<ul>
<li>define the term “tidy data”</li>
<li>discuss the advantages and disadvantages from storing data in a tidy data format</li>
<li>recall and use the following tidyverse functions and operators for their intended data wrangling tasks:
<ul>
<li><code>select</code></li>
<li><code>filter</code></li>
<li><code>map</code></li>
<li><code>mutate</code></li>
<li><code>summarise</code></li>
<li><code>group_by</code></li>
<li><code>gather</code></li>
<li><code>separate</code></li>
<li><code>%in%</code></li>
</ul></li>
</ul>
</div>
<div id="vectors-and-data-frames" class="section level2">
<h2><span class="header-section-number">3.3</span> Vectors and Data frames</h2>
<p>At this point, we know how to load flat, tabular data files into R using the <code>tidyverse</code> functions. When we do this, the data is represented in R as a data frame object. So now, we will spend some time learning more about these types of objects in R and what they are made up of so that we have a better understanding of how we can use and manipulate these objects.</p>
<div id="what-is-a-data-frame" class="section level3">
<h3><span class="header-section-number">3.3.1</span> What is a data frame?</h3>
<p>Let’s first start by defining exactly what a data frame is. From a data perspective, it is a rectangle where the rows are the observations.</p>
<div class="figure">
<img src="img/obs.jpeg" />

</div>
<p>And the columns are the variables. Unlike Python’s data frames that require the pandas package, data frames are built-in, base R objects.</p>
<div class="figure">
<img src="img/vars.jpeg" />

</div>
<p>From a computer science type/object perspective, in R, a data frame is a special sub-type of a list object whose elements (columns) are vectors.</p>
<div class="figure">
<img src="img/vectors.jpeg" />

</div>
</div>
<div id="what-is-a-vector" class="section level3">
<h3><span class="header-section-number">3.3.2</span> What is a vector?</h3>
<p>In R, vectors are objects that can contain 1 or more elements. The vector elements are ordered, and they must all be of the same type. They are also mutable. Vectors are also built-in, base R objects.</p>
<div class="figure">
<img src="img/vector.jpeg" />

</div>
</div>
<div id="how-are-vectors-different-from-a-list" class="section level3">
<h3><span class="header-section-number">3.3.3</span> How are vectors different from a list?</h3>
<p>Vectors and lists differ by the requirement of element type consistency. All elements within a single vector must be of the same type (e.g., all elements are strings), whereas elements within a single list can be of different types (e.g., strings and numbers can be elements in the same list).</p>
<div class="figure">
<img src="img/vec_vs_list.jpeg" />

</div>
</div>
<div id="what-does-this-have-to-do-with-data-frames" class="section level3">
<h3><span class="header-section-number">3.3.4</span> What does this have to do with data frames?</h3>
<p>As mentioned earlier, data frames are really specialized lists of vectors that allow us to easily work with our data in a rectangular/spreadsheet like manner. This allows us have columns/vectors of different characteristics associated/linked in one object similar to a table in a database.</p>
<div class="figure">
<img src="img/dataframe.jpeg" />

</div>
</div>
</div>
<div id="the-dplyr-functions" class="section level2">
<h2><span class="header-section-number">3.4</span> The <code>dplyr</code> functions</h2>
<p>We haven’t explicitly said this yet, but the <code>tidyverse</code> is actually a meta R package that installs a collection of R packages that all follow the tidy data philosophy (more on this below). One of the tidyverse packages is <code>dplyr</code> - a data wrangling workhorse. You have already met 3 of the dplyr function (<code>select</code>, <code>filter</code> and <code>mutate</code>). To learn more about those three and meet a few more useful ones, read the post at this link: <a href="http://stat545.com/block010_dplyr-end-single-table.html#where-were-we" class="uri">http://stat545.com/block010_dplyr-end-single-table.html#where-were-we</a></p>
</div>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">3.5</span> Tidy Data</h2>
<p>There are many ways a spreadsheet-like dataset can be organized. In this chapter we are going to focus on the tidy data format of organization, and how to make your messy data tidy. This is because a variety of tools we would like to be able to use in R are designed to work most effectively (and efficiently) with tidy data.</p>
<div id="what-is-tidy-data" class="section level3">
<h3><span class="header-section-number">3.5.1</span> What is tidy data?</h3>
<p>A tidy data is one that is satified by these three criteria:</p>
<ul>
<li>each row is a single observation,</li>
<li>each variable is a single column, and</li>
<li>each value is a single cell (i.e., its row, column position in the data frame is not shared with another value)</li>
</ul>
</div>
<div id="why-is-tidy-data-important-in-r" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Why is tidy data important in R?</h3>
<p>First, many tidyverse data cleaning/wrangling tools work best with tidy data.</p>
<p>Second, in contrast to Matplotlib in Python, the ggplot functions expect data in tidy format. A move towards this philosophy is also happening in Python in the altair package.</p>
<p>Third most statistical analysis functions expect data in tidy format. In contrast to Python, in R you do not need to manually create dummy variables to represent your categorical data for its statistical or machine learning tools. R does this for you under the hood through factorization.</p>
<p>Given that all of these tasks are central features to virtually any data analysis project it is well worth spending the time to get your data into a tidy format up front. Now let’s explore how we can do this in R.</p>
</div>
<div id="going-from-wide-to-long-or-tidy-using-gather" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Going from wide to long (or tidy!) using <code>gather</code></h3>
<p>One common thing that often has to be done to get data into a tidy format is to gather columns so that each row is a single observation and each column is a single variable. Often times data does not come this way, as although tidy data is a better organization structure for data analysis, it is not as intuitive of a data organization structure for human readability and understanding.</p>
<p>For example, the we read in data below is not in tidy format, but is in a very intuitive format for human understanding:</p>
<pre><code>library(tidyverse)
hist_vote_wide &lt;- read_csv(&quot;historical_vote_wide.csv&quot;)
head(hist_vote_wide)</code></pre>
<pre><code># A tibble: 6 x 3
  election_year winner       runnerup       
          &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;          
1          2016 Donald Trump Hillary Clinton
2          2012 Barack Obama Mitt Romney    
3          2008 Barack Obama John McCain    
4          2004 George Bush  John Kerry     
5          2000 George Bush  Al Gore        
6          1996 Bill Clinton Bob Dole    </code></pre>
<p>What is wrong with our untidy format above? From a data analysis perspective, this format is not idead because in this format the outcome of the variable “result” (winner or runner up) is stored as column names and not easily accessible for the functions we will desire to apply to our data set. Additionally, the values of the “candidate” variable is spread across two columns and will require some sort of binding or joining to get them into one single column to allow us to do our desired visualization and statistical tasks later on.</p>
<p>To accomplish this data tranformation we will use the <code>tidyverse</code> function <code>gather</code>. To use gather we need to specify:</p>
<ol style="list-style-type: decimal">
<li><p>the dataset</p></li>
<li><p>the key which is the name of a new column that will be created and whose values will come from names of the columns that we want to combine (here <code>result</code>)</p></li>
<li><p>the value which is the name of a new column that will be created and whose values will come from the values of the columns we want to combine (here <code>value</code>)</p></li>
<li><p>the names of the columns that we want to combine (we list these after specifying the key and value and separate the column names with commas)</p></li>
</ol>
<p>For our example we would use gather to combine the winner and runnerup columns into a single column called candidate, and create a column called result that contains the outcome of the election for each candidate:</p>
<pre><code>hist_vote_tidy &lt;- hist_vote_wide %&gt;% 
  gather(key = result, value = candidate, winner, runnerup)
         
print(hist_vote_tidy)</code></pre>
<pre><code># A tibble: 20 x 3
   election_year result   candidate      
           &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;          
 1          2016 winner   Donald Trump   
 2          2012 winner   Barack Obama   
 3          2008 winner   Barack Obama   
 4          2004 winner   George W Bush  
 5          2000 winner   George W Bush  
 6          1996 winner   Bill Clinton   
 7          1992 winner   Bill Clinton   
 8          1988 winner   George HW Bush 
 9          1984 winner   Ronald Reagan  
10          1980 winner   Ronald Reagan  
11          2016 runnerup Hillary Clinton
12          2012 runnerup Mitt Romney    
13          2008 runnerup John McCain    
14          2004 runnerup John Kerry     
15          2000 runnerup Al Gore        
16          1996 runnerup Bob Dole       
17          1992 runnerup George HW Bush 
18          1988 runnerup Michael Dukakis
19          1984 runnerup Walter Mondale 
20          1980 runnerup Jimmy Carter         </code></pre>
</div>
<div id="using-separate-to-deal-with-multiple-delimiters" class="section level3">
<h3><span class="header-section-number">3.5.4</span> Using separate to deal with multiple delimiters</h3>
<p>Data is also not considered tidy when multiple values are stored in the same cell. We can see that in addition to the previous untidy problem we faced with the earlier version of this data set, the one we show below is even messier because the winner and runnerup columns contain both the candidate’s name as well as the party they were a member of. To make this messy data tidy we’ll have to fix both of these issues.</p>
<pre><code>hist_vote_messy &lt;- read_csv(&quot;historical_vote_messy.csv&quot;)
print(hist_vote_messy)</code></pre>
<pre><code># A tibble: 10 x 3
   election_year winner             runnerup           
           &lt;int&gt; &lt;chr&gt;              &lt;chr&gt;              
 1          2016 Donald Trump/Rep   Hillary Clinton/Dem
 2          2012 Barack Obama/Dem   Mitt Romney/Rep    
 3          2008 Barack Obama/Dem   John McCain/Rep    
 4          2004 George W Bush/Rep  John Kerry/Dem     
 5          2000 George W Bush/Rep  Al Gore/Dem        
 6          1996 Bill Clinton/Dem   Bob Dole/Rep       
 7          1992 Bill Clinton/Dem   George HW Bush/Rep 
 8          1988 George HW Bush/Rep Michael Dukakis/Dem
 9          1984 Ronald Reagan/Rep  Walter Mondale/Dem 
10          1980 Ronald Reagan/Rep  Jimmy Carter/Dem </code></pre>
<p>First we’ll use gather to create the result and candidate column as we did previously:</p>
<pre><code>gather(hist_vote_messy, 
                         key = result, 
                         value = candidate, 
                         winner, 
                         runnerup)</code></pre>
<pre><code># A tibble: 20 x 3
   election_year result   candidate          
           &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;              
 1          2016 winner   Donald Trump/Rep   
 2          2012 winner   Barack Obama/Dem   
 3          2008 winner   Barack Obama/Dem   
 4          2004 winner   George W Bush/Rep  
 5          2000 winner   George W Bush/Rep  
 6          1996 winner   Bill Clinton/Dem   
 7          1992 winner   Bill Clinton/Dem   
 8          1988 winner   George HW Bush/Rep 
 9          1984 winner   Ronald Reagan/Rep  
10          1980 winner   Ronald Reagan/Rep  
11          2016 runnerup Hillary Clinton/Dem
12          2012 runnerup Mitt Romney/Rep    
13          2008 runnerup John McCain/Rep    
14          2004 runnerup John Kerry/Dem     
15          2000 runnerup Al Gore/Dem        
16          1996 runnerup Bob Dole/Rep       
17          1992 runnerup George HW Bush/Rep 
18          1988 runnerup Michael Dukakis/Dem
19          1984 runnerup Walter Mondale/Dem 
20          1980 runnerup Jimmy Carter/Dem </code></pre>
<p>And then we separate to split the candidate column into two columns, one called candidate that now contains only the candidate’s name, and called party that contains a short identifier for which political party the candidate belonged to:</p>
<pre><code>gather(hist_vote_messy, 
                         key = result, 
                         value = candidate, 
                         winner, 
                         runnerup) %&gt;% 
  separate(col = candidate, 
         into = c(&quot;candidate&quot;, &quot;party&quot;), 
         sep = &quot;/&quot;) </code></pre>
<pre><code># A tibble: 20 x 4
   election_year result   candidate       party
           &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;
 1          2016 winner   Donald Trump    Rep  
 2          2012 winner   Barack Obama    Dem  
 3          2008 winner   Barack Obama    Dem  
 4          2004 winner   George W Bush   Rep  
 5          2000 winner   George W Bush   Rep  
 6          1996 winner   Bill Clinton    Dem  
 7          1992 winner   Bill Clinton    Dem  
 8          1988 winner   George HW Bush  Rep  
 9          1984 winner   Ronald Reagan   Rep  
10          1980 winner   Ronald Reagan   Rep  
11          2016 runnerup Hillary Clinton Dem  
12          2012 runnerup Mitt Romney     Rep  
13          2008 runnerup John McCain     Rep  
14          2004 runnerup John Kerry      Dem  
15          2000 runnerup Al Gore         Dem  
16          1996 runnerup Bob Dole        Rep  
17          1992 runnerup George HW Bush  Rep  
18          1988 runnerup Michael Dukakis Dem  
19          1984 runnerup Walter Mondale  Dem  
20          1980 runnerup Jimmy Carter    Dem  </code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reading.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-wrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
