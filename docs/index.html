<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Data Science</title>
  <meta name="description" content="This is an open source textbook for teaching Introductory Data Science.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an open source textbook for teaching Introductory Data Science." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Data Science" />
  
  <meta name="twitter:description" content="This is an open source textbook for teaching Introductory Data Science." />
  

<meta name="author" content="Tiffany-Anne Timbers">
<meta name="author" content="Melissa Lee">
<meta name="author" content="Samuel Hinshaw">


<meta name="date" content="2019-01-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  

<link rel="next" href="reading.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to Data Science</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#jupyter-notebooks"><i class="fa fa-check"></i><b>1.2</b> Jupyter notebooks</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#loading-a-tabular-dataset"><i class="fa fa-check"></i><b>1.3</b> Loading a tabular dataset</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assigning-value-to-an-object"><i class="fa fa-check"></i><b>1.4</b> Assigning value to an object</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#subsetting-data-frames-with-select-filter"><i class="fa fa-check"></i><b>1.5</b> Subsetting data frames with <code>select</code> &amp; <code>filter</code></a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#using-select-to-subset-multiple-columns"><i class="fa fa-check"></i><b>1.5.1</b> Using <code>select</code> to subset multiple columns</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#using-select-to-subset-a-range-of-columns"><i class="fa fa-check"></i><b>1.5.2</b> Using <code>select</code> to subset a range of columns</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#using-filter-to-subset-a-single-column"><i class="fa fa-check"></i><b>1.5.3</b> Using <code>filter</code> to subset a single column</a></li>
<li class="chapter" data-level="1.5.4" data-path="index.html"><a href="index.html#using-filter-to-get-rows-with-values-above-a-threshold"><i class="fa fa-check"></i><b>1.5.4</b> Using <code>filter</code> to get rows with values above a threshold</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#combining-functions-using-the-pipe-operator"><i class="fa fa-check"></i><b>1.6</b> Combining functions using the pipe operator: %&gt;%</a><ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#using-to-combine-filter-and-select"><i class="fa fa-check"></i><b>1.6.1</b> Using %&gt;% to combine <code>filter</code> and <code>select</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#using-with-more-than-two-functions"><i class="fa fa-check"></i><b>1.6.2</b> Using %&gt;% with more than two functions</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#creating-visualizations-in-r"><i class="fa fa-check"></i><b>1.7</b> Creating Visualizations in R</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#using-ggplot-to-create-a-scatter-plot"><i class="fa fa-check"></i><b>1.7.1</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#using-ggplot-to-create-a-scatter-plot-1"><i class="fa fa-check"></i><b>1.7.2</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#formatting-ggplot-objects"><i class="fa fa-check"></i><b>1.7.3</b> Formatting ggplot objects</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#coloring-points-by-group"><i class="fa fa-check"></i><b>1.7.4</b> Coloring points by group</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#whats-next"><i class="fa fa-check"></i><b>1.7.5</b> What’s next?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>2</b> Reading in data locally and from the web</a><ul>
<li class="chapter" data-level="2.1" data-path="reading.html"><a href="reading.html#overview"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="reading.html"><a href="reading.html#chapter-learning-objectives-1"><i class="fa fa-check"></i><b>2.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="2.3" data-path="reading.html"><a href="reading.html#absolute-and-relative-file-paths"><i class="fa fa-check"></i><b>2.3</b> Absolute and relative file paths</a></li>
<li class="chapter" data-level="2.4" data-path="reading.html"><a href="reading.html#reading-tabular-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading tabular data into R</a><ul>
<li class="chapter" data-level="2.4.1" data-path="reading.html"><a href="reading.html#read_delim-as-a-more-flexible-method-to-get-tabular-data-into-r"><i class="fa fa-check"></i><b>2.4.1</b> <code>read_delim</code> as a more flexible method to get tabular data into R</a></li>
<li class="chapter" data-level="2.4.2" data-path="reading.html"><a href="reading.html#reading-tabular-data-directly-from-a-url"><i class="fa fa-check"></i><b>2.4.2</b> Reading tabular data directly from a URL</a></li>
<li class="chapter" data-level="2.4.3" data-path="reading.html"><a href="reading.html#previewing-a-data-file-before-reading-it-into-r"><i class="fa fa-check"></i><b>2.4.3</b> Previewing a data file before reading it into R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reading.html"><a href="reading.html#scraping-data-off-the-web-using-r"><i class="fa fa-check"></i><b>2.5</b> Scraping data off the web using R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="reading.html"><a href="reading.html#html-and-css-selectors"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS selectors</a></li>
<li class="chapter" data-level="2.5.2" data-path="reading.html"><a href="reading.html#are-you-allowed-to-scrape-that-website"><i class="fa fa-check"></i><b>2.5.2</b> Are you allowed to scrape that website?</a></li>
<li class="chapter" data-level="2.5.3" data-path="reading.html"><a href="reading.html#using-rvest"><i class="fa fa-check"></i><b>2.5.3</b> Using <code>rvest</code></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="reading.html"><a href="reading.html#additional-readingsresources"><i class="fa fa-check"></i><b>2.6</b> Additional readings/resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>3</b> Cleaning and wrangling data</a><ul>
<li class="chapter" data-level="3.1" data-path="wrangling.html"><a href="wrangling.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="wrangling.html"><a href="wrangling.html#chapter-learning-objectives-2"><i class="fa fa-check"></i><b>3.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="3.3" data-path="wrangling.html"><a href="wrangling.html#vectors-and-data-frames"><i class="fa fa-check"></i><b>3.3</b> Vectors and Data frames</a><ul>
<li class="chapter" data-level="3.3.1" data-path="wrangling.html"><a href="wrangling.html#what-is-a-data-frame"><i class="fa fa-check"></i><b>3.3.1</b> What is a data frame?</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangling.html"><a href="wrangling.html#what-is-a-vector"><i class="fa fa-check"></i><b>3.3.2</b> What is a vector?</a></li>
<li class="chapter" data-level="3.3.3" data-path="wrangling.html"><a href="wrangling.html#how-are-vectors-different-from-a-list"><i class="fa fa-check"></i><b>3.3.3</b> How are vectors different from a list?</a></li>
<li class="chapter" data-level="3.3.4" data-path="wrangling.html"><a href="wrangling.html#what-does-this-have-to-do-with-data-frames"><i class="fa fa-check"></i><b>3.3.4</b> What does this have to do with data frames?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangling.html"><a href="wrangling.html#the-dplyr-functions"><i class="fa fa-check"></i><b>3.4</b> The <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="3.5" data-path="wrangling.html"><a href="wrangling.html#tidy-data"><i class="fa fa-check"></i><b>3.5</b> Tidy Data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling.html"><a href="wrangling.html#what-is-tidy-data"><i class="fa fa-check"></i><b>3.5.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling.html"><a href="wrangling.html#why-is-tidy-data-important-in-r"><i class="fa fa-check"></i><b>3.5.2</b> Why is tidy data important in R?</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling.html"><a href="wrangling.html#going-from-wide-to-long-or-tidy-using-gather"><i class="fa fa-check"></i><b>3.5.3</b> Going from wide to long (or tidy!) using <code>gather</code></a></li>
<li class="chapter" data-level="3.5.4" data-path="wrangling.html"><a href="wrangling.html#using-separate-to-deal-with-multiple-delimiters"><i class="fa fa-check"></i><b>3.5.4</b> Using separate to deal with multiple delimiters</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="wrangling.html"><a href="wrangling.html#additional-readingsresources-1"><i class="fa fa-check"></i><b>3.6</b> Additional readings/resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Introduction to Data Science</h1>
<p class="author"><em>Tiffany-Anne Timbers</em></p>
<p class="author"><em>Melissa Lee</em></p>
<p class="author"><em>Samuel Hinshaw</em></p>
<p class="date"><em>2019-01-13</em></p>
</div>
<div id="introduction-to-data-science" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction to Data Science</h1>
<p>This is an open source textbook aimed at introducing undergraduate students to Data Science. It was originally written for the University of British Columbia’s DSCI 100 - Introduction to Data Science course.</p>
<p>This course uses Jupyter and the R programming language to illustrate how to solve 3 common problems in Data Science:</p>
<ol style="list-style-type: decimal">
<li>Predicting a class/category for a new observation/measurement (e.g., cancerous or benign tumour)</li>
<li>Finding previously unknown/unlabelled subgroups in your data (e.g., products commonly bought together on Amazon)</li>
<li>Predicting a value for a new observation/measurement (e.g., 10 km race time for 30-35 year old males with a BMI &gt; 25).</li>
</ol>
<p>This book/course is structured so that learners spend the first four chapters learning how to use R to load, wrangle/clean and plot data. The remaining 4 chapters cover solutions to the three solutions provided above.</p>
<div id="chapter-learning-objectives" class="section level2">
<h2><span class="header-section-number">1.1</span> Chapter learning objectives</h2>
<p>By the end of the chapter, students will be able to:</p>
<ul>
<li>use a Jupyter notebook to execute provided R code</li>
<li>edit code and markdown cells in a Jupyter notebook</li>
<li>create new code and markdown cells in a Jupyter notebook</li>
<li>load the <code>tidyverse</code> library into R</li>
<li>create new variables and objects in R using the assignment symbol</li>
<li>use the help and documentation tools in R</li>
<li>match the names of the following functions from the <code>tidyverse</code> library to their documentation descriptions:
<ul>
<li><code>read_csv</code></li>
<li><code>select</code></li>
<li><code>mutate</code></li>
<li><code>filter</code></li>
<li><code>ggplot</code></li>
<li><code>aes</code></li>
</ul></li>
<li>chain together two functions using the pipe operator, <code>%&gt;%</code></li>
</ul>
</div>
<div id="jupyter-notebooks" class="section level2">
<h2><span class="header-section-number">1.2</span> Jupyter notebooks</h2>
<p>Jupyter Notebooks are documents that contain a mix of computer code (and its output) and formattable text. Given that they can mix these two things in a single document (code is not separate from the output or written report), they are one of the leading tools to create reproducible data analysis. The name Jupyter came from combining the names of the three programming language that it was initially targeted for (Julia, Python, and R), and now many other languages can be used with Jupyter notebooks.</p>
<p>A notebook looks like this:</p>
<p><img src="img/jupyter.png"></p>
<p>We have created a short demo video to help you get started and introduce you to Jupyter:</p>
<iframe width="840" height="473" src="https://www.youtube.com/embed/2yv4pEmFgnw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>However, the best way to learn how to write and run code and formattable text in a Jupyter notebook is to do it. So we have also created this worksheet as a step-by-step guide through it: <a href="https://github.com/UBC-DSCI/dsci-100/blob/master/materials/worksheet_01/worksheet_01.ipynb" class="uri">https://github.com/UBC-DSCI/dsci-100/blob/master/materials/worksheet_01/worksheet_01.ipynb</a></p>
</div>
<div id="loading-a-tabular-dataset" class="section level2">
<h2><span class="header-section-number">1.3</span> Loading a tabular dataset</h2>
<p>Often, the first thing we need to do in data analysis is to load a dataset into R. Once we get our data into R, we would like to work with it as a data frame object. You can think of data frames as a spreadsheet-like object, where the rows are the observations collected/measured and the columns are the variables.</p>
<p>The first data set we will work with is in a comma-separated file, or <code>.csv</code>, format. There are many functions available in R we could use to load a <code>.csv</code> file, but we are going to use <code>read_csv()</code> from the <code>tidyverse</code> package because it is fast it creates a “special” variant of the base R data frame object with several nice properties we’ll discuss in further detail later in the course.</p>
<p>In it’s most basic use case, <code>read_csv()</code> expects that:</p>
<ul>
<li>column names are present</li>
<li><code>,</code> is the delimiter/separator</li>
<li>there are no row names in the dataset</li>
</ul>
<p>Let’s explore how to do this! We will load a <code>.csv</code> file named “state_property_data.csv” that is in the same directory/folder as our notebook/script. This data file is from <a href="https://datausa.io/" class="uri">https://datausa.io/</a> and has US state-level property, income and population data from 2015. If we were to open this data in a plain text editor, it would look like this:</p>
<pre><code>state,med_income,med_prop_val,population,mean_commute_minutes
AK,64222,197300,733375,10.46830207
AL,36924,94800,4830620,25.30990746
AR,35833,83300,2958208,22.40108933
AZ,44748,128700,6641928,20.58786
CA,53075,252100,38421464,23.38085172</code></pre>
<p>Here we now load the data into R. To do this, we first need to load the <code>tidyverse</code> library. We do this using the library function. Next we call the <code>read_csv()</code> and pass it a single argument, the path to the file - “state_property_data.csv” - as a string. This is the only argument we need to provide for this file because it satisfies the default arguments of the <code>read_csv</code> function that we just discussed. Later in the course, we’ll learn more about how to deal with files where the default arguments are not appropriate, for example tab separated files or files with no headers.</p>
<pre><code>library(tidyverse)
read_csv(&quot;state_property_data.csv&quot;)</code></pre>
<pre><code># A tibble: 52 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AK         64222       197300     733375                 10.5
 2 AL         36924        94800    4830620                 25.3
 3 AR         35833        83300    2958208                 22.4
 4 AZ         44748       128700    6641928                 20.6
 5 CA         53075       252100   38421464                 23.4
 6 CO         48098       198900    5278906                 19.5
 7 CT         69228       246450    3593222                 24.3
 8 DC         70848       475800     647484                 28.3
 9 DE         54976       228500     926454                 24.5
10 FL         43355       125600   19645772                 24.8
# ... with 42 more rows</code></pre>
</div>
<div id="assigning-value-to-an-object" class="section level2">
<h2><span class="header-section-number">1.4</span> Assigning value to an object</h2>
<p>When we loaded the US state-level property, income and population data in the last slide using <code>read_csv()</code>, we did not assign the output of this function to an object, so it was merely printed to the console and not stored anywhere. This is not that useful - what we would like to do is assign the output of the <code>read_csv()</code> function, a data frame, to an object so that we can use it later for analysis and visualization.</p>
<p>To assign value to an object in R, there are two possible ways - using either the assignment symbol or the equals symbol (as is done in Python). From a style perspective, the assignment symbol is prefered and is what we will use in this course.</p>
<p>Do note however, that the assignment symbol has a very different meaning with function argument definitions and is only used in special cases. In general, we use the equals symbol during function argument definitions.</p>
<p>Let’s now use the assignment symbol to store the US state-level property, income and population data in a data frame object that we call prop_data.</p>
<pre><code>prop_data &lt;- read_csv(&quot;state_property_data.csv&quot;)
print(prop_data)</code></pre>
<p>To preview the prop_data object, we can use the <code>print()</code> function.</p>
<pre><code># A tibble: 52 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AK         64222       197300     733375                 10.5
 2 AL         36924        94800    4830620                 25.3
 3 AR         35833        83300    2958208                 22.4
 4 AZ         44748       128700    6641928                 20.6
 5 CA         53075       252100   38421464                 23.4
 6 CO         48098       198900    5278906                 19.5
 7 CT         69228       246450    3593222                 24.3
 8 DC         70848       475800     647484                 28.3
 9 DE         54976       228500     926454                 24.5
10 FL         43355       125600   19645772                 24.8
# ... with 42 more rows</code></pre>
</div>
<div id="subsetting-data-frames-with-select-filter" class="section level2">
<h2><span class="header-section-number">1.5</span> Subsetting data frames with <code>select</code> &amp; <code>filter</code></h2>
<p>Now, we are going to learn how to select subsets of data from a data frame in R using the <code>tidyverse</code> functions <code>select()</code> and <code>filter()</code>. <code>select()</code> allows you to subset columns of a data frame, while <code>filter()</code> allows you to subset rows with specific values.</p>
<p>Before we start using <code>select()</code> and <code>filter()</code>, let’s take a look at the US state-level property, income and population data again to familiarize ourselves with it. We will do this by printing the data we loaded earlier in the chapter to the screen.</p>
<pre><code>print(prop_data)</code></pre>
<pre><code># A tibble: 52 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AK         64222       197300     733375                 10.5
 2 AL         36924        94800    4830620                 25.3
 3 AR         35833        83300    2958208                 22.4
 4 AZ         44748       128700    6641928                 20.6
 5 CA         53075       252100   38421464                 23.4
 6 CO         48098       198900    5278906                 19.5
 7 CT         69228       246450    3593222                 24.3
 8 DC         70848       475800     647484                 28.3
 9 DE         54976       228500     926454                 24.5
10 FL         43355       125600   19645772                 24.8
# ... with 42 more rows</code></pre>
<p>When peak at the data frame we see there are 5 columns: 1. US state abbreviation 2. Median household income 3. Median property value 4. US state population 5. Mean communte time in minutes</p>
<p>There are 52 rows in this dataset (corresponding to the 51 US states and the US territory, Puerto Rico).</p>
<p>Let’s use <code>select()</code> to subset the state column from this data frame. To use <code>select()</code> to subset the state column, we’ll provide the function with two arguments. The first argument is the name of the data frame object, here prop_data. The second argument is the column name that we want to subset, here state. <code>select()</code> returns a single column (the state column that we asked for) as a data frame object.</p>
<pre><code>select(prop_data, state)</code></pre>
<pre><code># A tibble: 52 x 1
   state
   &lt;chr&gt;
 1 AK   
 2 AL   
 3 AR   
 4 AZ   
 5 CA   
 6 CO   
 7 CT   
 8 DC   
 9 DE   
10 FL   
# ... with 42 more rows</code></pre>
<div id="using-select-to-subset-multiple-columns" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Using <code>select</code> to subset multiple columns</h3>
<p>We can also use <code>select()</code> to subset multiple columns. Again, the first argument is the name of the data frame. Then we list all the columns we want as arguments separated by commas. Here the list was three columns: state, median property value and mean commute time in minutes.</p>
<pre><code>select(prop_data, state, med_prop_val, mean_commute_minutes)</code></pre>
<pre><code># A tibble: 52 x 3
   state med_prop_val mean_commute_minutes
   &lt;chr&gt;        &lt;dbl&gt;                &lt;dbl&gt;
 1 AK         197300.                 10.5
 2 AL          94800.                 25.3
 3 AR          83300.                 22.4
 4 AZ         128700.                 20.6
 5 CA         252100.                 23.4
 6 CO         198900.                 19.5
 7 CT         246450.                 24.3
 8 DC         475800.                 28.3
 9 DE         228500.                 24.5
10 FL         125600.                 24.8
# ... with 42 more rows</code></pre>
</div>
<div id="using-select-to-subset-a-range-of-columns" class="section level3">
<h3><span class="header-section-number">1.5.2</span> Using <code>select</code> to subset a range of columns</h3>
<p>We can also use <code>select()</code> to subest a range of columns using the colon. For example, to get all the columns from state to med_prop_val we provide the second arugument to <code>select()</code> as state:med_prop_val.</p>
<pre><code>select(prop_data, state:med_prop_val)</code></pre>
<pre><code># A tibble: 52 x 3
   state med_income med_prop_val
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;
 1 AK        64222.      197300.
 2 AL        36924.       94800.
 3 AR        35833.       83300.
 4 AZ        44748.      128700.
 5 CA        53075.      252100.
 6 CO        48098.      198900.
 7 CT        69228.      246450.
 8 DC        70848.      475800.
 9 DE        54976.      228500.
10 FL        43355.      125600.
# ... with 42 more rows</code></pre>
</div>
<div id="using-filter-to-subset-a-single-column" class="section level3">
<h3><span class="header-section-number">1.5.3</span> Using <code>filter</code> to subset a single column</h3>
<p>We can use the <code>filter()</code> function to subset rows with desired values from a data frame of interest. Again, our first argument is the name of the data frame object, prop_data. The second argument is a logical statement to filter the rows, here we say that we are interested in rows where state equals NY (for New York).</p>
<p>Filter returns a data frame object that has all the columns of the input data frame but with only the rows we asked for in our filter statement.</p>
<pre><code>filter(prop_data, state == &quot;NY&quot;)</code></pre>
<pre><code># A tibble: 1 x 5
  state med_income med_prop_val population mean_commute_minutes
  &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
1 NY        50839.      134150.   19673174                 24.4</code></pre>
</div>
<div id="using-filter-to-get-rows-with-values-above-a-threshold" class="section level3">
<h3><span class="header-section-number">1.5.4</span> Using <code>filter</code> to get rows with values above a threshold</h3>
<p>If we are interested in finding information about the states who have a longer mean commute time than New York, whose mean commute time is 21.5 minutes, then we can provide an expression to filter to obtain rows where the value of mean_commute_minutes is greater than 21.5.</p>
<p>We see that <code>filter()</code> returns to use a data frame with 33 rows indicating that there are 33 states with longer commute times on average than New York.</p>
<pre><code>filter(prop_data, mean_commute_minutes &gt; 21.5)</code></pre>
<pre><code># A tibble: 33 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AL        36924.       94800.    4830620                 25.3
 2 AR        35833.       83300.    2958208                 22.4
 3 CA        53075.      252100.   38421464                 23.4
 4 CT        69228.      246450.    3593222                 24.3
 5 DC        70848.      475800.     647484                 28.3
 6 DE        54976.      228500.     926454                 24.5
 7 FL        43355.      125600.   19645772                 24.8
 8 GA        37865.      101700.   10006693                 24.5
 9 IL        47898.       97350.   12873761                 22.6
10 IN        47194.      111800.    6568645                 23.5
# ... with 23 more rows</code></pre>
</div>
</div>
<div id="combining-functions-using-the-pipe-operator" class="section level2">
<h2><span class="header-section-number">1.6</span> Combining functions using the pipe operator: %&gt;%</h2>
<p>Now we will learn about an efficient way to combine functions in R; the pipe operator %&gt;%. You can think of the pipe as a physical pipe - taking the output from the expression on the left-handside of the pipe and passing it as the input to first expression on the right-handside of the pipe. Let’s look at some examples of this.</p>
<div id="using-to-combine-filter-and-select" class="section level3">
<h3><span class="header-section-number">1.6.1</span> Using %&gt;% to combine <code>filter</code> and <code>select</code></h3>
<p>Remembering our prop_data data frame:</p>
<pre><code>print(prop_data)</code></pre>
<pre><code># A tibble: 52 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AK         64222       197300     733375                 10.5
 2 AL         36924        94800    4830620                 25.3
 3 AR         35833        83300    2958208                 22.4
 4 AZ         44748       128700    6641928                 20.6
 5 CA         53075       252100   38421464                 23.4
 6 CO         48098       198900    5278906                 19.5
 7 CT         69228       246450    3593222                 24.3
 8 DC         70848       475800     647484                 28.3
 9 DE         54976       228500     926454                 24.5
10 FL         43355       125600   19645772                 24.8
# ... with 42 more rows</code></pre>
<p>If we would like to subset the values for median income and median property value for the state of California (“CA”), we can use the functions <code>filter()</code> and <code>select()</code> to do this. First we use <code>filter()</code> to create a data frame object called ca_prop_data that only contains the values for the state of California. We can then use <code>select()</code> on this data frame to subset the values for median income and median property value for California:</p>
<pre><code>ca_prop_data &lt;- filter(prop_data, state == &quot;CA&quot;)
select(ca_prop_data, med_income, med_prop_val)</code></pre>
<pre><code># A tibble: 1 x 2
  med_income med_prop_val
       &lt;dbl&gt;        &lt;dbl&gt;
1     53075.      252100.</code></pre>
<p>Although this is a valid approach, there is a more efficient and readable approach we could take by using the pipe. With the pipe, we do not need to create an intermediate object to store the output from <code>filter()</code>, instead we can use the pipe to directly send the output of <code>filter()</code> to the input of <code>select()</code>:</p>
<pre><code>filter(prop_data, state == &quot;CA&quot;) %&gt;% select(med_income, med_prop_val)</code></pre>
<pre><code># A tibble: 1 x 2
  med_income med_prop_val
       &lt;dbl&gt;        &lt;dbl&gt;
1     53075.      252100.</code></pre>
<p>But wait? Why does our <code>select()</code> function call look different in these two examples? Well, when you use the pipe, the output of the function on the left is automatically provided as the value for the first argument for the function on the right, and thus you do not specify the value for that argument in that function call.</p>
<p>As you can see, both of these approaches give us the same output but the second approach is more efficient and readable.</p>
</div>
<div id="using-with-more-than-two-functions" class="section level3">
<h3><span class="header-section-number">1.6.2</span> Using %&gt;% with more than two functions</h3>
<p>The %&gt;% can be used with any function in R. Additionally, we can pipe together more than two functions. In this example, we will pipe together 3 functions to get the values for median income and which presidential party the states of Washington DC and Mississippi voted for in the 2016 US presidential election.</p>
<p>To do this, we will load another dataset that contains the party each state voted for in the 2016 US presidential election and join that dataset to our US state-level property, income and population dataset. We will use the <code>read_csv())</code> function, as we did earlier in the chapter, to load this data set.</p>
<pre><code>vote_data &lt;- read_csv(&quot;2016_presidential_election_state_vote.csv&quot;)
print(vote_data)</code></pre>
<pre><code># A tibble: 51 x 2
   party      state
   &lt;chr&gt;      &lt;chr&gt;
 1 republican AL   
 2 republican AK   
 3 republican AZ   
 4 republican AR   
 5 democrat   CA   
 6 democrat   CO   
 7 democrat   CT   
 8 democrat   DE   
 9 democrat   DC   
10 republican FL   
# ... with 41 more rows</code></pre>
<p>Given that both data sets have a “state” column, we can join the two datasets on that column using the <code>left_join()</code> function in R. From this larger, joined dataset, we will now be able to <code>filter()</code> and <code>select()</code> the values for median income and which presidential party the states of Washington DC and Mississippi voted for in the 2016 US presidential election.</p>
<pre><code>left_join(prop_data, vote_data, by = &quot;state&quot;)</code></pre>
<pre><code># A tibble: 52 x 6
   state med_income med_prop_val population mean_commute_minutes party     
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt; &lt;chr&gt;     
 1 AK         64222       197300     733375                 10.5 republican
 2 AL         36924        94800    4830620                 25.3 republican
 3 AR         35833        83300    2958208                 22.4 republican
 4 AZ         44748       128700    6641928                 20.6 republican
 5 CA         53075       252100   38421464                 23.4 democrat  
 6 CO         48098       198900    5278906                 19.5 democrat  
 7 CT         69228       246450    3593222                 24.3 democrat  
 8 DC         70848       475800     647484                 28.3 democrat  
 9 DE         54976       228500     926454                 24.5 democrat  
10 FL         43355       125600   19645772                 24.8 republican
# ... with 42 more rows</code></pre>
<p>We can pipe the output of our join to <code>filter()</code> and the rows for the states of New York and South Dakota. We can <code>filter()</code> on two states by using the or operator. Again, we can use the pipe to send the output of <code>filter()</code> to <code>select()</code>, and use <code>select()</code> to finally subset the values from the state, median income and party voted for columns.</p>
<pre><code>left_join(prop_data, vote_data, by = &quot;state&quot;) %&gt;%
    filter(state == &quot;DC&quot; | state == &quot;MS&quot;) %&gt;%
    select(state, med_income, party)</code></pre>
<pre><code># A tibble: 2 x 3
  state med_income party     
  &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     
1 DC        70848. democrat  
2 MS        33748. republican</code></pre>
</div>
</div>
<div id="creating-visualizations-in-r" class="section level2">
<h2><span class="header-section-number">1.7</span> Creating Visualizations in R</h2>
<p>Creating data visualizations is an essential piece to any data analysis. For the remainder of Chapter 1, we will learn how we can use some of the <code>tidyverse</code> functions to make visualizations to explore the relationship between median household income and median propery value across US states, as well as how this relates to which party each state voted for in the 2016 US election.</p>
<div id="using-ggplot-to-create-a-scatter-plot" class="section level3">
<h3><span class="header-section-number">1.7.1</span> Using <code>ggplot</code> to create a scatter plot</h3>
<p>First, take another look at the dataset we have been focusing on - the US state-level property, income and population data from 2015. We can see that there is a row/observation for each state. And the two variables we are interested in visualizing, median household income and median property value, are each in separate columns - thus the data are what we call a tidy data format. This is really important for <code>ggplot()</code> and many of the other <code>tidyverse</code> functions (as you will learn more in later chapters).</p>
<pre><code>print(prop_data)</code></pre>
<pre><code># A tibble: 52 x 5
   state med_income med_prop_val population mean_commute_minutes
   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;int&gt;                &lt;dbl&gt;
 1 AK         64222       197300     733375                 10.5
 2 AL         36924        94800    4830620                 25.3
 3 AR         35833        83300    2958208                 22.4
 4 AZ         44748       128700    6641928                 20.6
 5 CA         53075       252100   38421464                 23.4
 6 CO         48098       198900    5278906                 19.5
 7 CT         69228       246450    3593222                 24.3
 8 DC         70848       475800     647484                 28.3
 9 DE         54976       228500     926454                 24.5
10 FL         43355       125600   19645772                 24.8
# ... with 42 more rows</code></pre>
</div>
<div id="using-ggplot-to-create-a-scatter-plot-1" class="section level3">
<h3><span class="header-section-number">1.7.2</span> Using <code>ggplot</code> to create a scatter plot</h3>
<p>To create a scatter plot of these two variables using <code>ggplot()</code>, we would do the following:</p>
<ol style="list-style-type: decimal">
<li>call the <code>ggplot()</code> function</li>
<li>provide the name of the data frame as the first argument</li>
<li>call the aesthetic function to map a column to the x-axis and a column to the y-axis</li>
<li>add a “+” symbol at the end of the <code>ggplot()</code> call to add a layer to the plot</li>
<li>call the <code>geom_point()</code> function to tell R that we want to represent the data points (which we passed to the aesthetic function) as dots/points to create a scatter plot.</li>
</ol>
<pre><code>ggplot(prop_data, aes(x = med_income, y = med_prop_val)) +
    geom_point()</code></pre>
<div class="figure">
<img src="img/prop_val_vs_income.png" />

</div>
</div>
<div id="formatting-ggplot-objects" class="section level3">
<h3><span class="header-section-number">1.7.3</span> Formatting ggplot objects</h3>
<p>To format, or change an aspect of your <code>ggplot()</code> object, one common and easy way to do this is to add additional layers to your plot object using the + symbol. Here we use the <code>xlab()</code> and <code>ylab()</code> functions to add layers where we specify the labels for the x and y axis, respectively. There are many more layers we can add to format the plot further, and we will explore these in later chapters.</p>
<pre><code>ggplot(prop_data, aes(x = med_income, y = med_prop_val)) +
    geom_point() +
    xlab(&quot;Income (USD)&quot;) +
    ylab(&quot;Median property value (USD)&quot;)    </code></pre>
<div class="figure">
<img src="img/prop_val_vs_income_human_labs.png" />

</div>
</div>
<div id="coloring-points-by-group" class="section level3">
<h3><span class="header-section-number">1.7.4</span> Coloring points by group</h3>
<p>Another common thing to do with scatter plots is to colour points by a group/category in the dataset. For example, if we combine our US state-level property, income and population data with the dataset of which party each state voted for in the 2016 US presidential election, we can colour the points in our previous scatter plot to represent who each stated voted for. In this example, we’ll walk through code to accomplish this from loading the dataset to creating a visulazation. We will then take a look at the code required to do the same task in Python.</p>
<p>First, we load the <code>tidyverse</code> library:</p>
<pre><code>library(tidyverse)</code></pre>
<p>Second, we read the data into variables. Here we call the US state-level property, income and population data “prop_data” and the state-level 2016 US presidential election data “vote_data”:</p>
<pre><code>prop_data &lt;- read_csv(&quot;data/state_property_data.csv&quot;)
vote_data &lt;- read_csv(&quot;data/2016_presidential_election_state_vote.csv&quot;)</code></pre>
<p>Third, we create a new object called “combined_data” that we make by piping prop_data into the <code>filter()</code> function to remove the territory of PR (because they do not vote in the presidential election), and then we pipe that resultant dataframe to left_join to combine this dataset with the state-level 2016 US presidential election data:</p>
<pre><code>combined_data &lt;- prop_data %&gt;% 
  filter(state != &quot;PR&quot;) %&gt;% 
  left_join(vote_data)</code></pre>
<p>Finally, we use <code>ggplot()</code> to visualize this combined dataset as a scatter plot. We colour each point by the party they voted for in the 2016 US presidential election by adding another argument to our <code>aes()</code> function in our <code>ggplot()</code> call: color = party:</p>
<pre><code>ggplot(combined_data, aes(x = med_income, y = med_prop_val, color = party)) +
  geom_point() +
  xlab(&quot;Income (USD)&quot;) +
  ylab(&quot;Median property value (USD)&quot;)</code></pre>
<div class="figure">
<img src="img/prop_val_vs_income_by_party.png" />

</div>
<p>Below, we put it all together in one code chunk, and you can see here that in relatively few lines of R code we are able to create an entire data science workflow:</p>
<pre><code>library(tidyverse)

prop_data &lt;- read_csv(&quot;data/state_property_data.csv&quot;)
vote_data &lt;- read_csv(&quot;data/2016_presidential_election_state_vote.csv&quot;)

combined_data &lt;- prop_data %&gt;% 
  filter(state != &quot;PR&quot;) %&gt;% 
  left_join(vote_data)
  
ggplot(combined_data, aes(x = med_income, y = med_prop_val, color = party)) +
  geom_point() +
  xlab(&quot;Income (USD)&quot;) +
  ylab(&quot;Median property value (USD)&quot;)</code></pre>
<div class="figure">
<img src="img/prop_val_vs_income_by_party.png" />

</div>
</div>
<div id="whats-next" class="section level3">
<h3><span class="header-section-number">1.7.5</span> What’s next?</h3>
<p>In the next chapter we are going to dig in and spend more time learning how to load various differently formatted rectangular data sets into R, as well as how to scrape data from the web!</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="reading.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
